{% extends 'plantilla.html' %}

{% block content %}
<h2>Lista de Usuarios</h2>
<a href="{% url 'usuarios_create' %}" class="btn btn-primary mb-3">Crear Usuario</a>
<table id="usuarios-table" class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>ID</th><th>Usuario</th><th>Email</th><th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for user in usuarios %}
    <tr>
      <td>{{ user.id }}</td>
      <td>{{ user.username }}</td>
      <td>{{ user.email }}</td>
      <td>
        <a href="{% url 'usuarios_edit' user.id %}" class="btn btn-sm btn-warning">Editar</a>
        <a href="{% url 'usuarios_delete' user.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Â¿Eliminar usuario?');">Eliminar</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center">No hay usuarios registrados.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block extra_scripts %}
<script>
  $(document).ready(function() {
    $('#usuarios-table').DataTable({
      "language": {
        "url": "//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
      },
      "pageLength": 10,
      "ordering": true,
      "searching": true,
      "lengthChange": false
    });
  });
</script>
{% endblock %}
