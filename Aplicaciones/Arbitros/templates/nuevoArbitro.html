{% extends "./plantilla.html" %}
{% block content %}

<div class="row col-md-12 justify-content-center mt-5">
  <div class="col-md-6 bg-light p-4 rounded">
    <h1 class="fa fa-plus mb-4"> Nuevo √Årbitro</h1>

    <form method="post" id="frm_nuevo_arbitro" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="form-group mb-3">
        <label for="nombre">Nombre</label>
        <input class="form-control" type="text" name="nombre" id="nombre" value="{{ form.nombre.value|default:'' }}" />
      </div>

      <div class="form-group mb-3">
        <label for="cedula">C√©dula</label>
        <input class="form-control" type="text" name="cedula" id="cedula" value="{{ form.cedula.value|default:'' }}" />
      </div>

      <div class="form-group mb-3">
        <label for="nacionalidad">Nacionalidad</label>
        <input class="form-control" type="text" name="nacionalidad" id="nacionalidad" value="{{ form.nacionalidad.value|default:'' }}" />
      </div>

      <div class="form-group mb-3">
        <label for="edad">Edad</label>
        <input class="form-control" type="number" name="edad" id="edad" value="{{ form.edad.value|default:'' }}" />
      </div>

      <div class="form-group mb-3">
        <label for="experiencia">Experiencia (a√±os)</label>
        <input class="form-control" type="number" name="experiencia" id="experiencia" value="{{ form.experiencia.value|default:'' }}" />
      </div>

      <div class="form-group mt-4">
        <button class="btn btn-outline-success" type="submit">GUARDAR</button>
        <a href="/arbitros/" class="btn btn-outline-danger ml-2">
          <i class="fa fa-chevron-circle-left"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
  $(document).ready(function () {
    $.validator.addMethod("lettersonly", function (value, element) {
      return this.optional(element) || /^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]+$/.test(value);
    }, "Solo letras y espacios");

    $("#frm_nuevo_arbitro").validate({
      rules: {
        nombre: {
          required: true,
          minlength: 2,
          maxlength: 100,
          lettersonly: true
        },
        cedula: {
          required: true,
          digits: true,
          minlength: 10,
          maxlength: 10
        },
        nacionalidad: {
          required: true,
          minlength: 2,
          maxlength: 50,
          lettersonly: true
        },
        edad: {
          required: true,
          digits: true,
          min: 18,
          max: 70
        },
        experiencia: {
          required: true,
          digits: true,
          min: 2,
          max: 30
        }
      },
      messages: {
        nombre: {
          required: "Ingrese el nombre",
          minlength: "Debe tener al menos 2 caracteres",
          maxlength: "No debe superar los 100 caracteres",
          lettersonly: "Solo se permiten letras y espacios"
        },
        cedula: {
          required: "Ingrese la c√©dula",
          digits: "Solo n√∫meros",
          minlength: "Debe tener al menos 10 d√≠gitos",
          maxlength: "No debe superar los 10 d√≠gitos"
        },
        nacionalidad: {
          required: "Ingrese la nacionalidad",
          minlength: "Debe tener al menos 2 caracteres",
          maxlength: "No debe superar los 50 caracteres",
          lettersonly: "Solo se permiten letras y espacios"
        },
        edad: {
          required: "Ingrese la edad",
          digits: "Solo n√∫meros",
          min: "La edad m√≠nima es 18 a√±os",
          max: "La edad m√°xima es 70 a√±os"
        },
        experiencia: {
          required: "Ingrese la experiencia",
          digits: "Solo n√∫meros",
          min: "La experiencia m√≠nima es 2 a√±os",
          max: "La experiencia m√°xima es 30 a√±os"
        }
      },
      errorPlacement: function (error, element) {
        error.addClass('text-danger mt-1');
        error.insertAfter(element);  // üî• Mensaje debajo del input
      },
      highlight: function (element) {
        $(element).addClass('is-invalid');
      },
      unhighlight: function (element) {
        $(element).removeClass('is-invalid');
      }
    });
  });
</script>
{% endblock %}
