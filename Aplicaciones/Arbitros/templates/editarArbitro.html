{% extends "plantilla.html" %}

{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">

      <div class="card shadow-lg rounded-4 border-0">
        <div class="card-header bg-warning text-white text-center rounded-top-4">
          <h3 class="mb-0"><i class="bi bi-pencil-square"></i> Editar Árbitro</h3>
        </div>

        <div class="card-body">
          <form method="post" id="frm_editar_arbitro">
            {% csrf_token %}

            <div class="form-group mb-3">
              <label for="nombre">Nombre</label>
              <input class="form-control" type="text" name="nombre" id="nombre" value="{{ form.nombre.value|default:'' }}" />
            </div>

            <div class="form-group mb-3">
              <label for="cedula">Cédula</label>
              <input class="form-control" type="text" name="cedula" id="cedula" value="{{ form.cedula.value|default:'' }}" />
            </div>

            <div class="form-group mb-3">
              <label for="nacionalidad">Nacionalidad</label>
              <input class="form-control" type="text" name="nacionalidad" id="nacionalidad" value="{{ form.nacionalidad.value|default:'' }}" />
            </div>

            <div class="form-group mb-3">
              <label for="edad">Edad</label>
              <input class="form-control" type="number" name="edad" id="edad" value="{{ form.edad.value|default:'' }}" />
            </div>

            <div class="form-group mb-3">
              <label for="experiencia">Experiencia (años)</label>
              <input class="form-control" type="number" name="experiencia" id="experiencia" value="{{ form.experiencia.value|default:'' }}" />
            </div>

            <div class="d-flex justify-content-center gap-2 mt-4">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-circle-fill"></i> Guardar Cambios
              </button>
              <a href="{% url 'inicio_arbitros' %}" class="btn btn-secondary">
                <i class="bi bi-x-circle-fill"></i> Cancelar
              </a>
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  $(document).ready(function () {
    $.validator.addMethod("lettersonly", function (value, element) {
      return this.optional(element) || /^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(value);
    }, "Solo letras y espacios");

    $("#frm_editar_arbitro").validate({
      rules: {
        nombre: {
          required: true,
          minlength: 4,
          maxlength: 20,
          lettersonly: true
        },
        cedula: {
          required: true,
          digits: true,
          minlength: 10,
          maxlength: 10
        },
        nacionalidad: {
          required: true,
          minlength: 4,
          maxlength: 20,
          lettersonly: true
        },
        edad: {
          required: true,
          digits: true,
          min: 18,
          max: 70
        },
        experiencia: {
          required: true,
          digits: true,
          min: 2,
          max: 30
        }
      },
      messages: {
        nombre: {
          required: "Ingrese el nombre",
          minlength: "Debe tener al menos 4 caracteres",
          maxlength: "No debe superar los 20 caracteres",
          lettersonly: "Solo se permiten letras y espacios"
        },
        cedula: {
          required: "Ingrese la cédula",
          digits: "Solo números",
          minlength: "Debe tener al menos 10 dígitos",
          maxlength: "No debe superar los 10 dígitos"
        },
        nacionalidad: {
          required: "Ingrese la nacionalidad",
          minlength: "Debe tener al menos 4 caracteres",
          maxlength: "No debe superar los 20 caracteres",
          lettersonly: "Solo se permiten letras y espacios"
        },
        edad: {
          required: "Ingrese la edad",
          digits: "Solo números",
          min: "La edad mínima es 18 años",
          max: "La edad máxima es 70 años"
        },
        experiencia: {
          required: "Ingrese la experiencia",
          digits: "Solo números",
          min: "La experiencia mínima es 2 años",
          max: "La experiencia máxima es 30 años"
        }
      },
      errorPlacement: function (error, element) {
        error.addClass("text-danger mt-1");
        error.insertAfter(element);
      },
      highlight: function (element) {
        $(element).addClass("is-invalid");
      },
      unhighlight: function (element) {
        $(element).removeClass("is-invalid");
      }
    });
  });
</script>
{% endblock %}
