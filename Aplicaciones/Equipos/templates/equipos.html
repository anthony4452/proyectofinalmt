{% extends "./plantilla.html" %}
{% block content %}
<br>
<h1 class="fa fa-users mb-0"> Equipos</h1>

<div class="container mt-4">
    <div class="card shadow-lg rounded-4 border-0">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="/equipos/nuevoEquipo" class="btn btn-success">
                    <i class="bi bi-plus-circle-fill"></i> Crear Equipo
                </a>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="participaciones/nueva/" class="btn btn-success">
                    <i class="bi bi-plus-circle-fill"></i> Inscribir Equipo
                </a>
            </div>

            <div class="table-responsive rounded">
                <table class="table table-bordered table-striped table-hover" id="tbldis">
                    <thead class="table-dark text-center">
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Logo</th>
                            <th>Fundación</th>
                            <th>Presidente</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for equipo in equipos %}
                        <tr>
                            <td>{{ equipo.id }}</td>
                            <td>{{ equipo.nombre }}</td>
                            <td>
                                {% if equipo.logo %}
                                     <img src="{{ equipo.logo.url }}" height="80px" alt="">
                                {% else %}
                                     Sin logo
                                {% endif %}
                            </td>
                            <td>{{ equipo.fundacion }}</td>
                            <td>{{ equipo.presidente }}</td>
                            <td class="text-center">
                                <a href="editarEquipo/{{ equipo.id }}" class="btn btn-outline-warning">
                                    <i class="fa fa-pen"></i> Editar
                                </a>
                            <a href="#" class="btn btn-outline-danger" onclick="confirmarEliminacion('{{ equipo.id }}')">
                                <i class="fa fa-trash"></i> Eliminar
                            </a>

                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <a href="{% url 'admin_dashboard' %}" class="btn btn-danger">Volver</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function confirmarEliminacion(id) {
        Swal.fire({
            title: "¿Estás seguro?",
            text: "¡Esta acción no se puede deshacer!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Sí, eliminar",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = "eliminarEquipo/" + id + "/";
            }
        });
    }
</script>
<script>
  $(document).ready(function () {
    let table = $('#tbldis').DataTable({
      language: {
        lengthMenu: 'Mostrar _MENU_ registros por página',
        zeroRecords: 'No se encontraron resultados',
        info: 'Mostrando página _PAGE_ de _PAGES_',
        infoEmpty: 'No hay registros disponibles',
        infoFiltered: '(filtrado de _MAX_ registros totales)',
        search: 'Buscar:',
        paginate: {
          previous: 'Anterior',
          next: 'Siguiente'
        }
      },
      dom: 
        "<'row mb-3'" +
          "<'col-md-6 d-flex align-items-center'B>" + 
          "<'col-md-6 text-end'f>" +  // 👉 Búsqueda a la derecha
        ">" +
        "<'row'<'col-sm-12'tr>>" +
        "<'row mt-2'" +
          "<'col-sm-12 col-md-5'i>" +
          "<'col-sm-12 col-md-7 d-flex justify-content-end'p>" +  // 👉 Paginación a la derecha
        ">",
      buttons: [
        {
          extend: 'copy',
          text: '<i class="fa fa-copy"></i> Copiar',
          className: 'btn btn-dark me-2 mb-2'
        },
        {
          extend: 'csv',
          text: '<i class="fa fa-file-csv"></i> CSV',
          className: 'btn btn-success me-2 mb-2'
        },
        {
          extend: 'excel',
          text: '<i class="fa fa-file-excel"></i> Excel',
          className: 'btn btn-success me-2 mb-2'
        },
        {
          extend: 'pdf',
          text: '<i class="fa fa-file-pdf"></i> PDF',
          className: 'btn btn-danger me-2 mb-2'
        },
        {
          extend: 'print',
          text: '<i class="fa fa-print"></i> Imprimir',
          className: 'btn btn-primary me-2 mb-2'
        }
      ]
    });
  });
</script>
{% endblock %}
