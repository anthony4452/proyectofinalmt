{% extends './plantilla.html' %}
{% block content %}
<div class="row col-md-12 justify-content-center mt-5">
  <div class="col-md-6 bg-light p-4 rounded">
    <h1 class="fa fa-edit mb-4">Editar Participación</h1>

    <form method="post" action="{% url 'guardar_edicion_participacion' participacion.id %}" id="frmEditarParticipacion">
      {% csrf_token %}
      <div class="form-group mb-3">
        <label for="equipo">Equipo</label>
        <select name="equipo" id="equipo" class="form-control">
          <option value="">Seleccione...</option>
          {% for e in equipos %}
          <option value="{{ e.id }}" {% if e.id == participacion.equipo.id %}selected{% endif %}>{{ e.nombre }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group mb-3">
        <label for="temporada">Temporada</label>
        <select name="temporada" id="temporada" class="form-control">
          <option value="">Seleccione...</option>
          {% for t in temporadas %}
          <option value="{{ t.id }}" {% if t.id == participacion.temporada.id %}selected{% endif %}>
            {{ t.nombreliga }} - {{ t.nombretorneo }} - {{ t.año }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group mt-4 d-flex gap-2 justify-content-center">
        <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> Guardar Cambios</button>
        <a href="{% url 'lista_participaciones' %}" class="btn btn-secondary">Cancelar</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  $(document).ready(function() {
    $('#frmEditarParticipacion').validate({
      rules: {
        equipo: { required: true },
        temporada: { required: true }
      },
      messages: {
        equipo: { required: "Seleccione un equipo" },
        temporada: { required: "Seleccione una temporada" }
      }
    });
  });
</script>
{% endblock %}
