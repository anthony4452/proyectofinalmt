{% extends './plantilla.html' %}

{% block content %}
<div class="row col-md-12 justify-content-center mt-5">
  <div class="col-md-6 bg-light p-4 rounded">
    <h1 class="fa fa-plus mb-4"> Nueva Inscripción</h1>

    <form action="{% url 'guardar_inscripcion' %}" method="POST" id="frm_nueva_inscripcion">
      {% csrf_token %}

      <div class="form-group">
        <label for="jugador">Jugador</label>
        <select name="jugador" id="jugador" class="form-control">
          <option value="">Seleccione...</option>
          {% for j in jugadores %}
            <option value="{{ j.id }}">{{ j.nombres }} {{ j.apellidos }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="equipo">Equipo</label>
        <select name="equipo" id="equipo" class="form-control">
          <option value="">Seleccione...</option>
          {% for e in equipos %}
            <option value="{{ e.id }}">{{ e.nombre }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="temporada">Temporada</label>
        <select name="temporada" id="temporada" class="form-control">
          <option value="">Seleccione...</option>
          {% for t in temporadas %}
            <option value="{{ t.id }}">{{ t.nombreliga }} - {{ t.nombretorneo }} - {{ t.año }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="numero">Número (dorsal)</label>
        <input type="number" name="numero" id="numero" class="form-control" min="1" max="99" />
      </div>

      <div class="form-group mt-4">
        <button type="submit" class="btn btn-outline-success">Guardar</button>
        <a href="{% url 'lista_inscripciones' %}" class="btn btn-outline-danger ml-2">Cancelar</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  $(document).ready(function() {
    $("#frm_nueva_inscripcion").validate({
      rules: {
        jugador: { required: true },
        equipo: { required: true },
        temporada: { required: true },
        numero: { required: true, digits: true, min: 1, max: 99 }
      },
      messages: {
        jugador: { required: "Seleccione un jugador" },
        equipo: { required: "Seleccione un equipo" },
        temporada: { required: "Seleccione una temporada" },
        numero: {
          required: "Ingrese un número",
          digits: "Solo números válidos",
          min: "El número mínimo es 1",
          max: "El número máximo es 99"
        }
      }
    });
  });
</script>
{% endblock %}
